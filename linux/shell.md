# 语法

## 首行

```sh
#!/bin/bash
```

表明使用的解释器。



## 变量

### 定义

```sh
str="val"
```

=两侧不能有空格。

### 使用

```sh
${str}
```

### 只读

```sh
readonly str
```

### 删除

```sh
unset str
```

### 类型

字符串：

```sh
"val"
'val'
```

数字：

```sh
1
```

数组：

```sh
(1 2 3)
```

特殊变量：

```sh
$0
```

当前shell的文件名。

```sh
$1~9
```

传递给shell的第1~9个参数。

```sh
${x} (x>=10)
```

传递给shell的第10个及以上参数。

```sh
$$
```

当前shell的PID。

```sh
$#
```

 传递给shell的参数个数。

```sh
$? 
```

上一个命令的退出状态。0表示成功，非0表示失败。



## 字符串

### 单/双引号

单引号内的内容都将视为普通字符串。双引号内可以包含变量、转义字符。

### 长度

```sh
${#str}
```

### 截取

```sh
${str:start:len}
```





## 条件判断

### 基本结构

```sh
if 
then
	
elif 
then
	
else
	
fi
```



### 条件表达式

#### test

支持对整数、字符串、文件进行判断。

简写模式：[]

括号与条件之间必须存在空格。

```shel
[ xxx ]
```

运算符：

整数：-eq、-ne、-gt、-ge、-lt、-le

字符串：==、!=、-z ${str}（长度是否为0）、-n ${str}（长度是否不为0）

整数&字符串：\\<、\\>

文件：

-e filename 存在

-r 可读

-w 可写

-x 执行

-d 为目录

逻辑运算：与（-a）、或（-o）、非（!） 优先级：! > -a > -o

#### [[]]

运算符：

||、&&、!、==（支持模糊匹配）、=~（正则匹配）、-eq、-ne、-gt、-ge、-lt、-le、==、!=、-z ${str}、-n ${str}、<、>

字符串可以不使用引号。